"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload-section-image";
exports.ids = ["pages/api/upload-section-image"];
exports.modules = {

/***/ "multer":
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("multer");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-section-image&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-section-image.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-section-image&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-section-image.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_upload_section_image_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src\\pages\\api\\upload-section-image.js */ \"(api)/./src/pages/api/upload-section-image.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_section_image_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_upload_section_image_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload-section-image\",\n        pathname: \"/api/upload-section-image\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_upload_section_image_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZC1zZWN0aW9uLWltYWdlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTVDcGFnZXMlNUNhcGklNUN1cGxvYWQtc2VjdGlvbi1pbWFnZS5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN1RTtBQUN2RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbUVBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1FQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FkbWluLz9iMjEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmNcXFxccGFnZXNcXFxcYXBpXFxcXHVwbG9hZC1zZWN0aW9uLWltYWdlLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkLXNlY3Rpb24taW1hZ2VcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91cGxvYWQtc2VjdGlvbi1pbWFnZVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-section-image&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-section-image.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/upload-section-image.js":
/*!***********************************************!*\
  !*** ./src/pages/api/upload-section-image.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! multer */ \"multer\");\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// Настройка хранилища для multer\nconst storage = multer__WEBPACK_IMPORTED_MODULE_0___default().diskStorage({\n    destination: function(req, file, cb) {\n        const uploadDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"images\", \"sections\");\n        // Создаем директорию, если она не существует\n        if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(uploadDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(uploadDir, {\n                recursive: true\n            });\n        }\n        cb(null, uploadDir);\n    },\n    filename: function(req, file, cb) {\n        // Получаем ID секции из запроса\n        // В multer данные формы ещё не распарсены полностью на этом этапе\n        // Используем временный, уникальный идентификатор для имени файла\n        const timestamp = Date.now();\n        const randomStr = Math.random().toString(36).substring(2, 8);\n        const fileExt = path__WEBPACK_IMPORTED_MODULE_1___default().extname(file.originalname);\n        cb(null, `section_${timestamp}_${randomStr}${fileExt}`);\n    }\n});\n// Фильтр для проверки типа файла\nconst fileFilter = (req, file, cb)=>{\n    if (file.mimetype.startsWith(\"image/\")) {\n        cb(null, true);\n    } else {\n        cb(new Error(\"Только изображения разрешены!\"), false);\n    }\n};\n// Создаем middleware для загрузки\nconst upload = multer__WEBPACK_IMPORTED_MODULE_0___default()({\n    storage: storage,\n    fileFilter: fileFilter,\n    limits: {\n        fileSize: 5 * 1024 * 1024 // 5MB\n    }\n});\nfunction handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            message: \"Метод не разрешен\"\n        });\n    }\n    upload.single(\"image\")(req, res, async function(err) {\n        if (err instanceof (multer__WEBPACK_IMPORTED_MODULE_0___default().MulterError)) {\n            return res.status(400).json({\n                message: \"Ошибка загрузки файла: \" + err.message\n            });\n        } else if (err) {\n            return res.status(400).json({\n                message: err.message\n            });\n        }\n        if (!req.file) {\n            return res.status(400).json({\n                message: \"Файл не был загружен\"\n            });\n        }\n        try {\n            // Конвертируем изображение и оптимизируем\n            let filePath = req.file.path;\n            console.log(`Uploaded file path: ${filePath}, mimetype: ${req.file.mimetype}, originalname: ${req.file.originalname}`);\n            // После загрузки файла, теперь имеем доступ к данным формы\n            const sectionId = req.body.sectionId || \"section\";\n            console.log(`Section ID: ${sectionId}`);\n            // Если получили ID секции, переименуем файл\n            if (sectionId !== \"section\") {\n                const uploadDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"images\", \"sections\");\n                console.log(`Upload directory: ${uploadDir}`);\n                const newFileName = `${sectionId}.jpg`; // Всегда сохраняем как jpg\n                const newFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(uploadDir, newFileName);\n                console.log(`New file path: ${newFilePath}`);\n                // Обрабатываем сначала изображение и сохраняем в формате JPG\n                console.log(`Processing image with sharp...`);\n                try {\n                    // Создаем буфер из оригинального файла\n                    const inputBuffer = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath);\n                    console.log(`File read into buffer, size: ${inputBuffer.length} bytes`);\n                    // Обрабатываем и сохраняем в формате JPG\n                    const outputBuffer = await sharp__WEBPACK_IMPORTED_MODULE_3___default()(inputBuffer).resize(800, 600, {\n                        fit: \"inside\",\n                        withoutEnlargement: true\n                    }).jpeg({\n                        quality: 80\n                    }).toBuffer();\n                    console.log(`Image processed to buffer, size: ${outputBuffer.length} bytes`);\n                    // Записываем буфер в файл\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(newFilePath, outputBuffer);\n                    console.log(`Image successfully saved to ${newFilePath}, size: ${fs__WEBPACK_IMPORTED_MODULE_2___default().statSync(newFilePath).size} bytes`);\n                } catch (sharpError) {\n                    console.error(`Error processing image with sharp: ${sharpError.message}`);\n                    throw sharpError;\n                }\n                // Если файл с таким именем существует (кроме только что созданного) - удаляем старый\n                if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) {\n                    console.log(`Removing original file: ${filePath}`);\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(filePath);\n                    console.log(`Original file removed`);\n                }\n                // Обновляем путь к файлу\n                req.file.filename = newFileName;\n                console.log(`Updated filename: ${req.file.filename}`);\n            } else {\n                // Если нет нужды переименовывать, сохраняем как временный файл с jpg-расширением\n                const uploadDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"images\", \"sections\");\n                console.log(`Upload directory for generic section: ${uploadDir}`);\n                const newFileName = `section_${Date.now()}.jpg`;\n                const newFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(uploadDir, newFileName);\n                console.log(`New file path for generic section: ${newFilePath}`);\n                // Обрабатываем и сохраняем в формате JPG\n                console.log(`Processing image with sharp...`);\n                try {\n                    // Создаем буфер из оригинального файла\n                    const inputBuffer = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath);\n                    console.log(`File read into buffer, size: ${inputBuffer.length} bytes`);\n                    // Обрабатываем и сохраняем в формате JPG\n                    const outputBuffer = await sharp__WEBPACK_IMPORTED_MODULE_3___default()(inputBuffer).resize(800, 600, {\n                        fit: \"inside\",\n                        withoutEnlargement: true\n                    }).jpeg({\n                        quality: 80\n                    }).toBuffer();\n                    console.log(`Image processed to buffer, size: ${outputBuffer.length} bytes`);\n                    // Записываем буфер в файл\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(newFilePath, outputBuffer);\n                    console.log(`Image successfully saved to ${newFilePath}, size: ${fs__WEBPACK_IMPORTED_MODULE_2___default().statSync(newFilePath).size} bytes`);\n                } catch (sharpError) {\n                    console.error(`Error processing image with sharp: ${sharpError.message}`);\n                    throw sharpError;\n                }\n                // Удаляем оригинальный файл\n                if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) {\n                    console.log(`Removing original file: ${filePath}`);\n                    fs__WEBPACK_IMPORTED_MODULE_2___default().unlinkSync(filePath);\n                    console.log(`Original file removed`);\n                }\n                // Обновляем путь к файлу\n                req.file.filename = newFileName;\n                console.log(`Updated filename: ${req.file.filename}`);\n            }\n            // Формируем относительный путь для использования на фронтенде\n            const relativePath = `/images/sections/${req.file.filename}`;\n            console.log(`Final relative path: ${relativePath}`);\n            res.status(200).json({\n                message: \"Файл успешно загружен и обработан\",\n                path: relativePath\n            });\n        } catch (error) {\n            console.error(\"Ошибка при обработке изображения:\", error);\n            res.status(500).json({\n                message: \"Ошибка при обработке изображения\"\n            });\n        }\n    });\n}\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3VwbG9hZC1zZWN0aW9uLWltYWdlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDSjtBQUNKO0FBQ007QUFFMUIsaUNBQWlDO0FBQ2pDLE1BQU1JLFVBQVVKLHlEQUFrQixDQUFDO0lBQ2pDTSxhQUFhLFNBQVVDLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFO1FBQ2xDLE1BQU1DLFlBQVlULGdEQUFTLENBQUNXLFFBQVFDLEdBQUcsSUFBSSxVQUFVLFVBQVU7UUFDL0QsNkNBQTZDO1FBQzdDLElBQUksQ0FBQ1gsb0RBQWEsQ0FBQ1EsWUFBWTtZQUM3QlIsbURBQVksQ0FBQ1EsV0FBVztnQkFBRU0sV0FBVztZQUFLO1FBQzVDO1FBQ0FQLEdBQUcsTUFBTUM7SUFDWDtJQUNBTyxVQUFVLFNBQVVWLEdBQUcsRUFBRUMsSUFBSSxFQUFFQyxFQUFFO1FBQy9CLGdDQUFnQztRQUNoQyxrRUFBa0U7UUFDbEUsaUVBQWlFO1FBQ2pFLE1BQU1TLFlBQVlDLEtBQUtDLEdBQUc7UUFDMUIsTUFBTUMsWUFBWUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUc7UUFDMUQsTUFBTUMsVUFBVXpCLG1EQUFZLENBQUNPLEtBQUtvQixZQUFZO1FBQzlDbkIsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFUyxVQUFVLENBQUMsRUFBRUcsVUFBVSxFQUFFSyxRQUFRLENBQUM7SUFDeEQ7QUFDRjtBQUVBLGlDQUFpQztBQUNqQyxNQUFNRyxhQUFhLENBQUN0QixLQUFLQyxNQUFNQztJQUM3QixJQUFJRCxLQUFLc0IsUUFBUSxDQUFDQyxVQUFVLENBQUMsV0FBVztRQUN0Q3RCLEdBQUcsTUFBTTtJQUNYLE9BQU87UUFDTEEsR0FBRyxJQUFJdUIsTUFBTSxrQ0FBa0M7SUFDakQ7QUFDRjtBQUVBLGtDQUFrQztBQUNsQyxNQUFNQyxTQUFTakMsNkNBQU1BLENBQUM7SUFDcEJJLFNBQVNBO0lBQ1R5QixZQUFZQTtJQUNaSyxRQUFRO1FBQ05DLFVBQVUsSUFBSSxPQUFPLEtBQUssTUFBTTtJQUNsQztBQUNGO0FBRWUsU0FBU0MsUUFBUTdCLEdBQUcsRUFBRThCLEdBQUc7SUFDdEMsSUFBSTlCLElBQUkrQixNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBb0I7SUFDN0Q7SUFFQVIsT0FBT1MsTUFBTSxDQUFDLFNBQVNuQyxLQUFLOEIsS0FBSyxlQUFnQk0sR0FBRztRQUNsRCxJQUFJQSxlQUFlM0MsMkRBQWtCLEVBQUU7WUFDckMsT0FBT3FDLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVMsNEJBQTRCRSxJQUFJRixPQUFPO1lBQUM7UUFDakYsT0FBTyxJQUFJRSxLQUFLO1lBQ2QsT0FBT04sSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBU0UsSUFBSUYsT0FBTztZQUFDO1FBQ3JEO1FBRUEsSUFBSSxDQUFDbEMsSUFBSUMsSUFBSSxFQUFFO1lBQ2IsT0FBTzZCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBdUI7UUFDaEU7UUFFQSxJQUFJO1lBQ0YsMENBQTBDO1lBQzFDLElBQUlJLFdBQVd0QyxJQUFJQyxJQUFJLENBQUNQLElBQUk7WUFDNUI2QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsRUFBRUYsU0FBUyxZQUFZLEVBQUV0QyxJQUFJQyxJQUFJLENBQUNzQixRQUFRLENBQUMsZ0JBQWdCLEVBQUV2QixJQUFJQyxJQUFJLENBQUNvQixZQUFZLENBQUMsQ0FBQztZQUVySCwyREFBMkQ7WUFDM0QsTUFBTW9CLFlBQVl6QyxJQUFJMEMsSUFBSSxDQUFDRCxTQUFTLElBQUk7WUFDeENGLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRUMsVUFBVSxDQUFDO1lBRXRDLDRDQUE0QztZQUM1QyxJQUFJQSxjQUFjLFdBQVc7Z0JBQzNCLE1BQU10QyxZQUFZVCxnREFBUyxDQUFDVyxRQUFRQyxHQUFHLElBQUksVUFBVSxVQUFVO2dCQUMvRGlDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGtCQUFrQixFQUFFckMsVUFBVSxDQUFDO2dCQUU1QyxNQUFNd0MsY0FBYyxDQUFDLEVBQUVGLFVBQVUsSUFBSSxDQUFDLEVBQUUsMkJBQTJCO2dCQUNuRSxNQUFNRyxjQUFjbEQsZ0RBQVMsQ0FBQ1MsV0FBV3dDO2dCQUN6Q0osUUFBUUMsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFSSxZQUFZLENBQUM7Z0JBRTNDLDZEQUE2RDtnQkFDN0RMLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDhCQUE4QixDQUFDO2dCQUM1QyxJQUFJO29CQUNGLHVDQUF1QztvQkFDdkMsTUFBTUssY0FBY2xELHNEQUFlLENBQUMyQztvQkFDcENDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZCQUE2QixFQUFFSyxZQUFZRSxNQUFNLENBQUMsTUFBTSxDQUFDO29CQUV0RSx5Q0FBeUM7b0JBQ3pDLE1BQU1DLGVBQWUsTUFBTXBELDRDQUFLQSxDQUFDaUQsYUFDOUJJLE1BQU0sQ0FBQyxLQUFLLEtBQUs7d0JBQUVDLEtBQUs7d0JBQVVDLG9CQUFvQjtvQkFBSyxHQUMzREMsSUFBSSxDQUFDO3dCQUFFQyxTQUFTO29CQUFHLEdBQ25CQyxRQUFRO29CQUVYZixRQUFRQyxHQUFHLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRVEsYUFBYUQsTUFBTSxDQUFDLE1BQU0sQ0FBQztvQkFFM0UsMEJBQTBCO29CQUMxQnBELHVEQUFnQixDQUFDaUQsYUFBYUk7b0JBQzlCVCxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsRUFBRUksWUFBWSxRQUFRLEVBQUVqRCxrREFBVyxDQUFDaUQsYUFBYWEsSUFBSSxDQUFDLE1BQU0sQ0FBQztnQkFFeEcsRUFBRSxPQUFPQyxZQUFZO29CQUNuQm5CLFFBQVFvQixLQUFLLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRUQsV0FBV3hCLE9BQU8sQ0FBQyxDQUFDO29CQUN4RSxNQUFNd0I7Z0JBQ1I7Z0JBRUEscUZBQXFGO2dCQUNyRixJQUFJL0Qsb0RBQWEsQ0FBQzJDLFdBQVc7b0JBQzNCQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyx3QkFBd0IsRUFBRUYsU0FBUyxDQUFDO29CQUNqRDNDLG9EQUFhLENBQUMyQztvQkFDZEMsUUFBUUMsR0FBRyxDQUFDLENBQUMscUJBQXFCLENBQUM7Z0JBQ3JDO2dCQUVBLHlCQUF5QjtnQkFDekJ4QyxJQUFJQyxJQUFJLENBQUNTLFFBQVEsR0FBR2lDO2dCQUNwQkosUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUV4QyxJQUFJQyxJQUFJLENBQUNTLFFBQVEsQ0FBQyxDQUFDO1lBRXRELE9BQU87Z0JBQ0wsaUZBQWlGO2dCQUNqRixNQUFNUCxZQUFZVCxnREFBUyxDQUFDVyxRQUFRQyxHQUFHLElBQUksVUFBVSxVQUFVO2dCQUMvRGlDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNDQUFzQyxFQUFFckMsVUFBVSxDQUFDO2dCQUVoRSxNQUFNd0MsY0FBYyxDQUFDLFFBQVEsRUFBRS9CLEtBQUtDLEdBQUcsR0FBRyxJQUFJLENBQUM7Z0JBQy9DLE1BQU0rQixjQUFjbEQsZ0RBQVMsQ0FBQ1MsV0FBV3dDO2dCQUN6Q0osUUFBUUMsR0FBRyxDQUFDLENBQUMsbUNBQW1DLEVBQUVJLFlBQVksQ0FBQztnQkFFL0QseUNBQXlDO2dCQUN6Q0wsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLENBQUM7Z0JBQzVDLElBQUk7b0JBQ0YsdUNBQXVDO29CQUN2QyxNQUFNSyxjQUFjbEQsc0RBQWUsQ0FBQzJDO29CQUNwQ0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsNkJBQTZCLEVBQUVLLFlBQVlFLE1BQU0sQ0FBQyxNQUFNLENBQUM7b0JBRXRFLHlDQUF5QztvQkFDekMsTUFBTUMsZUFBZSxNQUFNcEQsNENBQUtBLENBQUNpRCxhQUM5QkksTUFBTSxDQUFDLEtBQUssS0FBSzt3QkFBRUMsS0FBSzt3QkFBVUMsb0JBQW9CO29CQUFLLEdBQzNEQyxJQUFJLENBQUM7d0JBQUVDLFNBQVM7b0JBQUcsR0FDbkJDLFFBQVE7b0JBRVhmLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGlDQUFpQyxFQUFFUSxhQUFhRCxNQUFNLENBQUMsTUFBTSxDQUFDO29CQUUzRSwwQkFBMEI7b0JBQzFCcEQsdURBQWdCLENBQUNpRCxhQUFhSTtvQkFDOUJULFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixFQUFFSSxZQUFZLFFBQVEsRUFBRWpELGtEQUFXLENBQUNpRCxhQUFhYSxJQUFJLENBQUMsTUFBTSxDQUFDO2dCQUV4RyxFQUFFLE9BQU9DLFlBQVk7b0JBQ25CbkIsUUFBUW9CLEtBQUssQ0FBQyxDQUFDLG1DQUFtQyxFQUFFRCxXQUFXeEIsT0FBTyxDQUFDLENBQUM7b0JBQ3hFLE1BQU13QjtnQkFDUjtnQkFFQSw0QkFBNEI7Z0JBQzVCLElBQUkvRCxvREFBYSxDQUFDMkMsV0FBVztvQkFDM0JDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHdCQUF3QixFQUFFRixTQUFTLENBQUM7b0JBQ2pEM0Msb0RBQWEsQ0FBQzJDO29CQUNkQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQztnQkFDckM7Z0JBRUEseUJBQXlCO2dCQUN6QnhDLElBQUlDLElBQUksQ0FBQ1MsUUFBUSxHQUFHaUM7Z0JBQ3BCSixRQUFRQyxHQUFHLENBQUMsQ0FBQyxrQkFBa0IsRUFBRXhDLElBQUlDLElBQUksQ0FBQ1MsUUFBUSxDQUFDLENBQUM7WUFDdEQ7WUFFQSw4REFBOEQ7WUFDOUQsTUFBTW1ELGVBQWUsQ0FBQyxpQkFBaUIsRUFBRTdELElBQUlDLElBQUksQ0FBQ1MsUUFBUSxDQUFDLENBQUM7WUFDNUQ2QixRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRXFCLGFBQWEsQ0FBQztZQUVsRC9CLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ25CQyxTQUFTO2dCQUNUeEMsTUFBTW1FO1lBQ1I7UUFDRixFQUFFLE9BQU9GLE9BQU87WUFDZHBCLFFBQVFvQixLQUFLLENBQUMscUNBQXFDQTtZQUNuRDdCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBbUM7UUFDckU7SUFDRjtBQUNGO0FBRU8sTUFBTTRCLFNBQVM7SUFDcEJDLEtBQUs7UUFDSEMsWUFBWTtJQUNkO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FkbWluLy4vc3JjL3BhZ2VzL2FwaS91cGxvYWQtc2VjdGlvbi1pbWFnZS5qcz8wNzVkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBzaGFycCBmcm9tICdzaGFycCc7XG5cbi8vINCd0LDRgdGC0YDQvtC50LrQsCDRhdGA0LDQvdC40LvQuNGJ0LAg0LTQu9GPIG11bHRlclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XG4gIGRlc3RpbmF0aW9uOiBmdW5jdGlvbiAocmVxLCBmaWxlLCBjYikge1xuICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2ltYWdlcycsICdzZWN0aW9ucycpO1xuICAgIC8vINCh0L7Qt9C00LDQtdC8INC00LjRgNC10LrRgtC+0YDQuNGOLCDQtdGB0LvQuCDQvtC90LAg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRglxuICAgIGlmICghZnMuZXhpc3RzU3luYyh1cGxvYWREaXIpKSB7XG4gICAgICBmcy5ta2RpclN5bmModXBsb2FkRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICB9XG4gICAgY2IobnVsbCwgdXBsb2FkRGlyKTtcbiAgfSxcbiAgZmlsZW5hbWU6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XG4gICAgLy8g0J/QvtC70YPRh9Cw0LXQvCBJRCDRgdC10LrRhtC40Lgg0LjQtyDQt9Cw0L/RgNC+0YHQsFxuICAgIC8vINCSIG11bHRlciDQtNCw0L3QvdGL0LUg0YTQvtGA0LzRiyDQtdGJ0ZEg0L3QtSDRgNCw0YHQv9Cw0YDRgdC10L3RiyDQv9C+0LvQvdC+0YHRgtGM0Y4g0L3QsCDRjdGC0L7QvCDRjdGC0LDQv9C1XG4gICAgLy8g0JjRgdC/0L7Qu9GM0LfRg9C10Lwg0LLRgNC10LzQtdC90L3Ri9C5LCDRg9C90LjQutCw0LvRjNC90YvQuSDQuNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDQtNC70Y8g0LjQvNC10L3QuCDRhNCw0LnQu9CwXG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCByYW5kb21TdHIgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCk7XG4gICAgY29uc3QgZmlsZUV4dCA9IHBhdGguZXh0bmFtZShmaWxlLm9yaWdpbmFsbmFtZSk7XG4gICAgY2IobnVsbCwgYHNlY3Rpb25fJHt0aW1lc3RhbXB9XyR7cmFuZG9tU3RyfSR7ZmlsZUV4dH1gKTtcbiAgfVxufSk7XG5cbi8vINCk0LjQu9GM0YLRgCDQtNC70Y8g0L/RgNC+0LLQtdGA0LrQuCDRgtC40L/QsCDRhNCw0LnQu9CwXG5jb25zdCBmaWxlRmlsdGVyID0gKHJlcSwgZmlsZSwgY2IpID0+IHtcbiAgaWYgKGZpbGUubWltZXR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcbiAgICBjYihudWxsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjYihuZXcgRXJyb3IoJ9Ci0L7Qu9GM0LrQviDQuNC30L7QsdGA0LDQttC10L3QuNGPINGA0LDQt9GA0LXRiNC10L3RiyEnKSwgZmFsc2UpO1xuICB9XG59O1xuXG4vLyDQodC+0LfQtNCw0LXQvCBtaWRkbGV3YXJlINC00LvRjyDQt9Cw0LPRgNGD0LfQutC4XG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe1xuICBzdG9yYWdlOiBzdG9yYWdlLFxuICBmaWxlRmlsdGVyOiBmaWxlRmlsdGVyLFxuICBsaW1pdHM6IHtcbiAgICBmaWxlU2l6ZTogNSAqIDEwMjQgKiAxMDI0IC8vIDVNQlxuICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgbWVzc2FnZTogJ9Cc0LXRgtC+0LQg0L3QtSDRgNCw0LfRgNC10YjQtdC9JyB9KTtcbiAgfVxuXG4gIHVwbG9hZC5zaW5nbGUoJ2ltYWdlJykocmVxLCByZXMsIGFzeW5jIGZ1bmN0aW9uIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAn0J7RiNC40LHQutCwINC30LDQs9GA0YPQt9C60Lgg0YTQsNC50LvQsDogJyArIGVyci5tZXNzYWdlIH0pO1xuICAgIH0gZWxzZSBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiBlcnIubWVzc2FnZSB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcS5maWxlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtZXNzYWdlOiAn0KTQsNC50Lsg0L3QtSDQsdGL0Lsg0LfQsNCz0YDRg9C20LXQvScgfSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vINCa0L7QvdCy0LXRgNGC0LjRgNGD0LXQvCDQuNC30L7QsdGA0LDQttC10L3QuNC1INC4INC+0L/RgtC40LzQuNC30LjRgNGD0LXQvFxuICAgICAgbGV0IGZpbGVQYXRoID0gcmVxLmZpbGUucGF0aDtcbiAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWRlZCBmaWxlIHBhdGg6ICR7ZmlsZVBhdGh9LCBtaW1ldHlwZTogJHtyZXEuZmlsZS5taW1ldHlwZX0sIG9yaWdpbmFsbmFtZTogJHtyZXEuZmlsZS5vcmlnaW5hbG5hbWV9YCk7XG4gICAgICBcbiAgICAgIC8vINCf0L7RgdC70LUg0LfQsNCz0YDRg9C30LrQuCDRhNCw0LnQu9CwLCDRgtC10L/QtdGA0Ywg0LjQvNC10LXQvCDQtNC+0YHRgtGD0L8g0Log0LTQsNC90L3Ri9C8INGE0L7RgNC80YtcbiAgICAgIGNvbnN0IHNlY3Rpb25JZCA9IHJlcS5ib2R5LnNlY3Rpb25JZCB8fCAnc2VjdGlvbic7XG4gICAgICBjb25zb2xlLmxvZyhgU2VjdGlvbiBJRDogJHtzZWN0aW9uSWR9YCk7XG4gICAgICBcbiAgICAgIC8vINCV0YHQu9C4INC/0L7Qu9GD0YfQuNC70LggSUQg0YHQtdC60YbQuNC4LCDQv9C10YDQtdC40LzQtdC90YPQtdC8INGE0LDQudC7XG4gICAgICBpZiAoc2VjdGlvbklkICE9PSAnc2VjdGlvbicpIHtcbiAgICAgICAgY29uc3QgdXBsb2FkRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnaW1hZ2VzJywgJ3NlY3Rpb25zJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBVcGxvYWQgZGlyZWN0b3J5OiAke3VwbG9hZERpcn1gKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYCR7c2VjdGlvbklkfS5qcGdgOyAvLyDQktGB0LXQs9C00LAg0YHQvtGF0YDQsNC90Y/QtdC8INC60LDQuiBqcGdcbiAgICAgICAgY29uc3QgbmV3RmlsZVBhdGggPSBwYXRoLmpvaW4odXBsb2FkRGlyLCBuZXdGaWxlTmFtZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBOZXcgZmlsZSBwYXRoOiAke25ld0ZpbGVQYXRofWApO1xuICAgICAgICBcbiAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INGB0L3QsNGH0LDQu9CwINC40LfQvtCx0YDQsNC20LXQvdC40LUg0Lgg0YHQvtGF0YDQsNC90Y/QtdC8INCyINGE0L7RgNC80LDRgtC1IEpQR1xuICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBpbWFnZSB3aXRoIHNoYXJwLi4uYCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8g0KHQvtC30LTQsNC10Lwg0LHRg9GE0LXRgCDQuNC3INC+0YDQuNCz0LjQvdCw0LvRjNC90L7Qs9C+INGE0LDQudC70LBcbiAgICAgICAgICBjb25zdCBpbnB1dEJ1ZmZlciA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYEZpbGUgcmVhZCBpbnRvIGJ1ZmZlciwgc2l6ZTogJHtpbnB1dEJ1ZmZlci5sZW5ndGh9IGJ5dGVzYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INC4INGB0L7RhdGA0LDQvdGP0LXQvCDQsiDRhNC+0YDQvNCw0YLQtSBKUEdcbiAgICAgICAgICBjb25zdCBvdXRwdXRCdWZmZXIgPSBhd2FpdCBzaGFycChpbnB1dEJ1ZmZlcilcbiAgICAgICAgICAgIC5yZXNpemUoODAwLCA2MDAsIHsgZml0OiAnaW5zaWRlJywgd2l0aG91dEVubGFyZ2VtZW50OiB0cnVlIH0pXG4gICAgICAgICAgICAuanBlZyh7IHF1YWxpdHk6IDgwIH0pXG4gICAgICAgICAgICAudG9CdWZmZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKGBJbWFnZSBwcm9jZXNzZWQgdG8gYnVmZmVyLCBzaXplOiAke291dHB1dEJ1ZmZlci5sZW5ndGh9IGJ5dGVzYCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g0JfQsNC/0LjRgdGL0LLQsNC10Lwg0LHRg9GE0LXRgCDQsiDRhNCw0LnQu1xuICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMobmV3RmlsZVBhdGgsIG91dHB1dEJ1ZmZlcik7XG4gICAgICAgICAgY29uc29sZS5sb2coYEltYWdlIHN1Y2Nlc3NmdWxseSBzYXZlZCB0byAke25ld0ZpbGVQYXRofSwgc2l6ZTogJHtmcy5zdGF0U3luYyhuZXdGaWxlUGF0aCkuc2l6ZX0gYnl0ZXNgKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoc2hhcnBFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgaW1hZ2Ugd2l0aCBzaGFycDogJHtzaGFycEVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgdGhyb3cgc2hhcnBFcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g0JXRgdC70Lgg0YTQsNC50Lsg0YEg0YLQsNC60LjQvCDQuNC80LXQvdC10Lwg0YHRg9GJ0LXRgdGC0LLRg9C10YIgKNC60YDQvtC80LUg0YLQvtC70YzQutC+INGH0YLQviDRgdC+0LfQtNCw0L3QvdC+0LPQvikgLSDRg9C00LDQu9GP0LXQvCDRgdGC0LDRgNGL0LlcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFJlbW92aW5nIG9yaWdpbmFsIGZpbGU6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYE9yaWdpbmFsIGZpbGUgcmVtb3ZlZGApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0L/Rg9GC0Ywg0Log0YTQsNC50LvRg1xuICAgICAgICByZXEuZmlsZS5maWxlbmFtZSA9IG5ld0ZpbGVOYW1lO1xuICAgICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBmaWxlbmFtZTogJHtyZXEuZmlsZS5maWxlbmFtZX1gKTtcbiAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDQldGB0LvQuCDQvdC10YIg0L3Rg9C20LTRiyDQv9C10YDQtdC40LzQtdC90L7QstGL0LLQsNGC0YwsINGB0L7RhdGA0LDQvdGP0LXQvCDQutCw0Log0LLRgNC10LzQtdC90L3Ri9C5INGE0LDQudC7INGBIGpwZy3RgNCw0YHRiNC40YDQtdC90LjQtdC8XG4gICAgICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2ltYWdlcycsICdzZWN0aW9ucycpO1xuICAgICAgICBjb25zb2xlLmxvZyhgVXBsb2FkIGRpcmVjdG9yeSBmb3IgZ2VuZXJpYyBzZWN0aW9uOiAke3VwbG9hZERpcn1gKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5ld0ZpbGVOYW1lID0gYHNlY3Rpb25fJHtEYXRlLm5vdygpfS5qcGdgO1xuICAgICAgICBjb25zdCBuZXdGaWxlUGF0aCA9IHBhdGguam9pbih1cGxvYWREaXIsIG5ld0ZpbGVOYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2coYE5ldyBmaWxlIHBhdGggZm9yIGdlbmVyaWMgc2VjdGlvbjogJHtuZXdGaWxlUGF0aH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCe0LHRgNCw0LHQsNGC0YvQstCw0LXQvCDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0LIg0YTQvtGA0LzQsNGC0LUgSlBHXG4gICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzaW5nIGltYWdlIHdpdGggc2hhcnAuLi5gKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQsdGD0YTQtdGAINC40Lcg0L7RgNC40LPQuNC90LDQu9GM0L3QvtCz0L4g0YTQsNC50LvQsFxuICAgICAgICAgIGNvbnN0IGlucHV0QnVmZmVyID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmlsZSByZWFkIGludG8gYnVmZmVyLCBzaXplOiAke2lucHV0QnVmZmVyLmxlbmd0aH0gYnl0ZXNgKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQntCx0YDQsNCx0LDRgtGL0LLQsNC10Lwg0Lgg0YHQvtGF0YDQsNC90Y/QtdC8INCyINGE0L7RgNC80LDRgtC1IEpQR1xuICAgICAgICAgIGNvbnN0IG91dHB1dEJ1ZmZlciA9IGF3YWl0IHNoYXJwKGlucHV0QnVmZmVyKVxuICAgICAgICAgICAgLnJlc2l6ZSg4MDAsIDYwMCwgeyBmaXQ6ICdpbnNpZGUnLCB3aXRob3V0RW5sYXJnZW1lbnQ6IHRydWUgfSlcbiAgICAgICAgICAgIC5qcGVnKHsgcXVhbGl0eTogODAgfSlcbiAgICAgICAgICAgIC50b0J1ZmZlcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYEltYWdlIHByb2Nlc3NlZCB0byBidWZmZXIsIHNpemU6ICR7b3V0cHV0QnVmZmVyLmxlbmd0aH0gYnl0ZXNgKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDQl9Cw0L/QuNGB0YvQstCw0LXQvCDQsdGD0YTQtdGAINCyINGE0LDQudC7XG4gICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhuZXdGaWxlUGF0aCwgb3V0cHV0QnVmZmVyKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgSW1hZ2Ugc3VjY2Vzc2Z1bGx5IHNhdmVkIHRvICR7bmV3RmlsZVBhdGh9LCBzaXplOiAke2ZzLnN0YXRTeW5jKG5ld0ZpbGVQYXRoKS5zaXplfSBieXRlc2ApO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChzaGFycEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBpbWFnZSB3aXRoIHNoYXJwOiAke3NoYXJwRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICB0aHJvdyBzaGFycEVycm9yO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCDQvtGA0LjQs9C40L3QsNC70YzQvdGL0Lkg0YTQsNC50LtcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFJlbW92aW5nIG9yaWdpbmFsIGZpbGU6ICR7ZmlsZVBhdGh9YCk7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYE9yaWdpbmFsIGZpbGUgcmVtb3ZlZGApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDQntCx0L3QvtCy0LvRj9C10Lwg0L/Rg9GC0Ywg0Log0YTQsNC50LvRg1xuICAgICAgICByZXEuZmlsZS5maWxlbmFtZSA9IG5ld0ZpbGVOYW1lO1xuICAgICAgICBjb25zb2xlLmxvZyhgVXBkYXRlZCBmaWxlbmFtZTogJHtyZXEuZmlsZS5maWxlbmFtZX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8g0KTQvtGA0LzQuNGA0YPQtdC8INC+0YLQvdC+0YHQuNGC0LXQu9GM0L3Ri9C5INC/0YPRgtGMINC00LvRjyDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRjyDQvdCwINGE0YDQvtC90YLQtdC90LTQtVxuICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gYC9pbWFnZXMvc2VjdGlvbnMvJHtyZXEuZmlsZS5maWxlbmFtZX1gO1xuICAgICAgY29uc29sZS5sb2coYEZpbmFsIHJlbGF0aXZlIHBhdGg6ICR7cmVsYXRpdmVQYXRofWApO1xuICAgICAgXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxuICAgICAgICBtZXNzYWdlOiAn0KTQsNC50Lsg0YPRgdC/0LXRiNC90L4g0LfQsNCz0YDRg9C20LXQvSDQuCDQvtCx0YDQsNCx0L7RgtCw0L0nLFxuICAgICAgICBwYXRoOiByZWxhdGl2ZVBhdGhcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0LHQvtGC0LrQtSDQuNC30L7QsdGA0LDQttC10L3QuNGPOicsIGVycm9yKTtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0L7QsdGA0LDQsdC+0YLQutC1INC40LfQvtCx0YDQsNC20LXQvdC40Y8nIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLCAvLyDQntGC0LrQu9GO0YfQsNC10Lwg0LLRgdGC0YDQvtC10L3QvdGL0Lkg0L/QsNGA0YHQtdGALCDRgtCw0Log0LrQsNC6IG11bHRlciDRgdCw0Lwg0L7QsdGA0LDQsdCw0YLRi9Cy0LDQtdGCIGZvcm1EYXRhXG4gIH0sXG59OyAiXSwibmFtZXMiOlsibXVsdGVyIiwicGF0aCIsImZzIiwic2hhcnAiLCJzdG9yYWdlIiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsInVwbG9hZERpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImZpbGVuYW1lIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJhbmRvbVN0ciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImZpbGVFeHQiLCJleHRuYW1lIiwib3JpZ2luYWxuYW1lIiwiZmlsZUZpbHRlciIsIm1pbWV0eXBlIiwic3RhcnRzV2l0aCIsIkVycm9yIiwidXBsb2FkIiwibGltaXRzIiwiZmlsZVNpemUiLCJoYW5kbGVyIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJzaW5nbGUiLCJlcnIiLCJNdWx0ZXJFcnJvciIsImZpbGVQYXRoIiwiY29uc29sZSIsImxvZyIsInNlY3Rpb25JZCIsImJvZHkiLCJuZXdGaWxlTmFtZSIsIm5ld0ZpbGVQYXRoIiwiaW5wdXRCdWZmZXIiLCJyZWFkRmlsZVN5bmMiLCJsZW5ndGgiLCJvdXRwdXRCdWZmZXIiLCJyZXNpemUiLCJmaXQiLCJ3aXRob3V0RW5sYXJnZW1lbnQiLCJqcGVnIiwicXVhbGl0eSIsInRvQnVmZmVyIiwid3JpdGVGaWxlU3luYyIsInN0YXRTeW5jIiwic2l6ZSIsInNoYXJwRXJyb3IiLCJlcnJvciIsInVubGlua1N5bmMiLCJyZWxhdGl2ZVBhdGgiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/upload-section-image.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload-section-image&preferredRegion=&absolutePagePath=.%2Fsrc%5Cpages%5Capi%5Cupload-section-image.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();